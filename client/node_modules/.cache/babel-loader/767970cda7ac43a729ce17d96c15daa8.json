{"ast":null,"code":"var _jsxFileName = \"D:\\\\course\\\\web programming-ric\\\\midterm_pizza\\\\client\\\\src\\\\components\\\\DiyPizza\\\\DiyPizza.js\";\nimport React, { Component } from 'react';\nimport { Row, Container, Col } from 'react-bootstrap';\nimport { Route } from \"react-router-dom\";\nimport 'bootstrap/dist/css/bootstrap.css';\nimport DecideTopping from './DecideTopping';\nimport LRLinkBtn from \"./LRLinkBtn\";\nimport DndPizza from \"./DndPizza\";\nimport CheckOut from \"./CheckOut\";\nexport default class DiyPizza extends Component {\n  constructor() {\n    super();\n\n    this.callApi = async () => {\n      const response = await fetch('/order');\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    this.toppingPlus = () => {\n      if (this.state.toppingNum < 3) {\n        this.setState(state => ({\n          toppingNum: state.toppingNum + 1\n        }));\n      }\n    };\n\n    this.toppingMinus = () => {\n      if (this.state.toppingNum > 0) {\n        this.setState(state => ({\n          toppingNum: state.toppingNum - 1\n        }));\n      }\n    };\n\n    this.btnLonClick = () => {\n      this.setState(state => ({\n        pageNum: state.pageNum - 1,\n        lastPage: this.routeOrder[state.pageNum - 1 - 1],\n        currentPage: this.routeOrder[state.pageNum - 1],\n        nextPage: this.routeOrder[state.pageNum - 1 + 1]\n      }));\n    };\n\n    this.btnRonClick = () => {\n      this.setState(state => ({\n        pageNum: state.pageNum + 1,\n        lastPage: this.routeOrder[state.pageNum + 1 - 1],\n        currentPage: this.routeOrder[state.pageNum + 1],\n        nextPage: this.routeOrder[state.pageNum + 1 + 1]\n      }));\n    };\n\n    this.dragIn = toppinName => {\n      console.log(this.state.toppingSpec[toppinName]);\n      this.setState(state => ({\n        toppingSpec: {\n          [state.toppingSpec[toppinName]]: state.toppingSpec[toppinName] + 1\n        }\n      }));\n    };\n\n    this.routeOrder = [\"topping\", \"dnd\", \"checkout\"];\n    this.routeOrder = [\"\", \"topping\", \"dnd\", \"checkout\", \"\"];\n    this.state = {\n      toppingNum: 0,\n      pageNum: 1,\n      lastPage: this.routeOrder[0],\n      currentPage: this.routeOrder[1],\n      nextPage: this.routeOrder[2],\n      toppingSpec: {\n        mushroom: 0,\n        pepperoni: 0,\n        green_pepper: 0,\n        black_olive: 0,\n        onion: 0\n      },\n      toppingPrice: 0\n    };\n  } // fetching price on the server\n\n\n  componentDidMount() {\n    this.callApi().then(res => this.setState({\n      toppingPrice: res.express\n    })).catch(err => console.log(err));\n  }\n\n  //////////////////////////////\n  render() {\n    console.log(this.state);\n    return React.createElement(React.Fragment, null, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"h-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(LRLinkBtn, {\n      pos: \"L\",\n      route: this.state.lastPage,\n      onClick: this.btnLonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 10,\n      md: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/order/diy/topping\",\n      render: () => React.createElement(DecideTopping, {\n        onClick: {\n          toppingPlus: this.toppingPlus,\n          toppingMinus: this.toppingMinus\n        },\n        topping: this.state.toppingNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/order/diy/dnd\",\n      render: () => React.createElement(DndPizza, {\n        topping: this.state.toppingNum,\n        toppingSpec: this.state.toppingSpec,\n        dragIn: this.dragIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/order/diy/checkout\",\n      render: checkOutProps => React.createElement(CheckOut, {\n        toppingSpec: this.dragIn,\n        topping: this.state.toppingNum,\n        toppingP: this.state.toppingPrice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(LRLinkBtn, {\n      pos: \"R\",\n      route: this.state.nextPage,\n      onClick: this.btnRonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["D:\\course\\web programming-ric\\midterm_pizza\\client\\src\\components\\DiyPizza\\DiyPizza.js"],"names":["React","Component","Row","Container","Col","Route","DecideTopping","LRLinkBtn","DndPizza","CheckOut","DiyPizza","constructor","callApi","response","fetch","body","json","status","Error","message","toppingPlus","state","toppingNum","setState","toppingMinus","btnLonClick","pageNum","lastPage","routeOrder","currentPage","nextPage","btnRonClick","dragIn","toppinName","console","log","toppingSpec","mushroom","pepperoni","green_pepper","black_olive","onion","toppingPrice","componentDidMount","then","res","express","catch","err","render","checkOutProps"],"mappings":"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","sourcesContent":["import React , { Component } from 'react';\r\nimport { Row, Container, Col } from 'react-bootstrap';\r\nimport { Route } from \"react-router-dom\";\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\nimport DecideTopping from './DecideTopping';\r\nimport LRLinkBtn from \"./LRLinkBtn\";\r\nimport DndPizza from \"./DndPizza\";\r\nimport CheckOut from \"./CheckOut\";\r\n\r\nexport default class DiyPizza extends Component {\r\n    constructor() {\r\n        super()\r\n        this.routeOrder = [\"\", \"topping\", \"dnd\", \"checkout\", \"\"];\r\n        this.state = {\r\n            toppingNum: 0,\r\n            pageNum: 1,\r\n            lastPage: this.routeOrder[0],\r\n            currentPage: this.routeOrder[1],\r\n            nextPage: this.routeOrder[2], \r\n            toppingSpec: {\r\n                mushroom: 0,\r\n                pepperoni: 0,\r\n                green_pepper: 0,\r\n                black_olive: 0,\r\n                onion: 0,\r\n            },\r\n            toppingPrice: 0,\r\n        }\r\n    }\r\n\r\n    // fetching price on the server\r\n\tcomponentDidMount() {\r\n\t\tthis.callApi()\r\n\t\t\t.then(res => this.setState({ toppingPrice: res.express }))\r\n            .catch(err => console.log(err));\r\n        \r\n\t}\r\n\tcallApi = async () => {\r\n\t\tconst response = await fetch('/order');\r\n\t\tconst body = await response.json();\r\n\t\tif (response.status !== 200) throw Error(body.message);\r\n\t\treturn body;\r\n\t};\r\n\r\n    // topping page function\r\n    toppingPlus = () => {\r\n        if (this.state.toppingNum < 3) {\r\n            this.setState((state) => ({\r\n                toppingNum: state.toppingNum + 1\r\n            }));\r\n        }\r\n    }\r\n\r\n    toppingMinus = () => {\r\n        if (this.state.toppingNum > 0) {\r\n            this.setState((state) => ({\r\n                toppingNum: state.toppingNum - 1\r\n            }));\r\n        }\r\n    }\r\n    ///////////////////////////////////\r\n\r\n    //LRbtn function\r\n    btnLonClick = () => {\r\n        this.setState((state) => ({\r\n            pageNum: state.pageNum - 1,\r\n            lastPage: this.routeOrder[state.pageNum - 1 - 1],\r\n            currentPage: this.routeOrder[state.pageNum - 1],\r\n            nextPage: this.routeOrder[state.pageNum - 1 + 1], \r\n        }));\r\n    }\r\n    btnRonClick = () => {\r\n        this.setState((state) => ({\r\n            pageNum: state.pageNum + 1,\r\n            lastPage: this.routeOrder[state.pageNum + 1 - 1],\r\n            currentPage: this.routeOrder[state.pageNum  + 1],\r\n            nextPage: this.routeOrder[state.pageNum + 1 + 1], \r\n        }));\r\n    }\r\n    ///////////////////////////////////\r\n\r\n    // Drag and drop function\r\n    dragIn = (toppinName) => {\r\n        console.log(this.state.toppingSpec[toppinName]);\r\n        this.setState((state) => ({\r\n            toppingSpec: {\r\n                [state.toppingSpec[toppinName]]: state.toppingSpec[toppinName] + 1,\r\n            }\r\n            \r\n        }));\r\n    }\r\n    ///////////////////////////////////\r\n\r\n    // Collection of every route in order\r\n    routeOrder = [\"topping\", \"dnd\", \"checkout\"];\r\n    \r\n    //////////////////////////////\r\n    render() {\r\n        console.log(this.state);\r\n        return (\r\n            <>\r\n            <Container>\r\n            <Row>\r\n            <section className=\"h-3\"></section>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <LRLinkBtn pos='L' route={this.state.lastPage} onClick={this.btnLonClick}/>\r\n                </Col>\r\n                <Col xs={10} md={8}>\r\n                    <Route exact path=\"/order/diy/topping\" render={() => <DecideTopping onClick={{toppingPlus: this.toppingPlus, toppingMinus: this.toppingMinus}} topping={this.state.toppingNum}/>}/>\r\n                    <Route exact path=\"/order/diy/dnd\" render={() => <DndPizza topping={this.state.toppingNum} toppingSpec={this.state.toppingSpec} dragIn={this.dragIn}/>} />\r\n                    <Route path=\"/order/diy/checkout\" render={(checkOutProps) => <CheckOut toppingSpec={this.dragIn} topping={this.state.toppingNum} toppingP={this.state.toppingPrice}/>} />\r\n                </Col>\r\n                <Col>\r\n                    <LRLinkBtn pos='R' route={this.state.nextPage} onClick={this.btnRonClick}/>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <section></section>\r\n            </Row>      \r\n            </Container>\r\n            </>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}